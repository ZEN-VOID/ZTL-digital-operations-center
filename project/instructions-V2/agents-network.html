<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ™ºèƒ½ä½“ç½‘ç»œæ‹“æ‰‘ - ZTLæ•°æ™ºåŒ–ä½œæˆ˜ä¸­å¿ƒ</title>
    <link rel="stylesheet" href="styles/common.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Electrolize&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/cytoscape@3.28.1/dist/cytoscape.min.js"></script>
    <script src="https://unpkg.com/cytoscape-dagre@2.5.0/cytoscape-dagre.js"></script>
    <script src="https://unpkg.com/dagre@0.8.5/dist/dagre.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --neon-pink: #ff00ff;
            --neon-cyan: #00ffff;
            --neon-purple: #b000ff;
            --cyber-bg-primary: #0a0a0f;
            --cyber-bg-secondary: #0f0f23;

            /* Battle Group Colors */
            --color-F: #00BFFF;  /* å¼€å‘ç»„ - æ·±ç©ºè“ */
            --color-G: #FF1493;  /* æˆ˜ç•¥ç»„ - ç«çº¢ */
            --color-X: #9400D3;  /* åˆ›æ„ç»„ - ç´«ç½—å…° */
            --color-E: #00FA9A;  /* æƒ…æŠ¥ç»„ - è–„è·ç»¿ */
            --color-R: #FF6347;  /* è¡Œæ”¿ç»„ - ç•ªèŒ„çº¢ */
            --color-V: #FFD700;  /* ç¾å›¢ç»„ - é‡‘é»„ */
            --color-Z: #32CD32;  /* ç­¹å»ºç»„ - é…¸æ©™ç»¿ */
            --color-C: #FF8C00;  /* ä¾›åº”ç»„ - æš—æ©™ */
        }

        body {
            font-family: 'Electrolize', sans-serif;
            background: var(--cyber-bg-primary);
            color: #a8a8ff;
            overflow-x: hidden;
        }

        /* Grid Background */
        body::before {
            content: '';
            position: fixed;
            width: 100%;
            height: 100%;
            background:
                linear-gradient(0deg, transparent 24%, rgba(255, 0, 255, 0.05) 25%, rgba(255, 0, 255, 0.05) 26%, transparent 27%),
                linear-gradient(90deg, transparent 24%, rgba(255, 0, 255, 0.05) 25%, rgba(255, 0, 255, 0.05) 26%, transparent 27%);
            background-size: 50px 50px;
            animation: grid-move 20s linear infinite;
            z-index: 0;
            pointer-events: none;
        }

        @keyframes grid-move {
            0% { transform: translateY(0); }
            100% { transform: translateY(50px); }
        }

        .container {
            max-width: 1800px;
            margin: 0 auto;
            padding: 40px 20px;
            position: relative;
            z-index: 1;
        }

        /* Header */
        .page-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .page-header h1 {
            font-family: 'Orbitron', sans-serif;
            font-size: 48px;
            font-weight: 900;
            color: var(--neon-cyan);
            text-shadow:
                0 0 10px var(--neon-cyan),
                0 0 20px var(--neon-cyan),
                0 0 40px rgba(0, 255, 255, 0.5);
            margin-bottom: 10px;
        }

        .page-header p {
            font-size: 18px;
            color: var(--neon-pink);
            text-shadow: 0 0 10px var(--neon-pink);
        }

        /* Control Panel */
        .control-panel {
            background: linear-gradient(135deg, var(--cyber-bg-secondary) 0%, rgba(26, 10, 46, 0.8) 100%);
            border: 2px solid var(--neon-pink);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 30px;
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            align-items: center;
            box-shadow:
                0 0 20px rgba(255, 0, 255, 0.3),
                inset 0 0 20px rgba(255, 0, 255, 0.1);
        }

        .control-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .control-group label {
            font-size: 14px;
            color: var(--neon-cyan);
            font-weight: bold;
        }

        .control-group select,
        .control-group button {
            padding: 8px 16px;
            background: rgba(255, 0, 255, 0.1);
            border: 2px solid var(--neon-pink);
            border-radius: 4px;
            color: var(--neon-cyan);
            font-family: 'Electrolize', sans-serif;
            cursor: pointer;
            transition: all 0.3s;
        }

        .control-group button:hover {
            background: rgba(255, 0, 255, 0.3);
            box-shadow: 0 0 15px var(--neon-pink);
        }

        /* Network Container */
        .network-container {
            background: linear-gradient(135deg, var(--cyber-bg-secondary) 0%, rgba(26, 10, 46, 0.8) 100%);
            border: 2px solid var(--neon-cyan);
            border-radius: 8px;
            padding: 20px;
            box-shadow:
                0 0 20px rgba(0, 255, 255, 0.3),
                inset 0 0 20px rgba(0, 255, 255, 0.1);
            height: 800px;
            position: relative;
        }

        #cy {
            width: 100%;
            height: 100%;
            border-radius: 4px;
        }

        /* Legend */
        .legend {
            background: linear-gradient(135deg, var(--cyber-bg-secondary) 0%, rgba(26, 10, 46, 0.8) 100%);
            border: 2px solid var(--neon-purple);
            border-radius: 8px;
            padding: 20px;
            margin-top: 30px;
            box-shadow:
                0 0 20px rgba(180, 0, 255, 0.3),
                inset 0 0 20px rgba(180, 0, 255, 0.1);
        }

        .legend-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 20px;
            color: var(--neon-purple);
            margin-bottom: 15px;
            text-shadow: 0 0 10px var(--neon-purple);
        }

        .legend-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            box-shadow: 0 0 10px currentColor;
        }

        .legend-label {
            font-size: 14px;
            color: #a8a8ff;
        }

        /* Stats Panel */
        .stats-panel {
            background: linear-gradient(135deg, var(--cyber-bg-secondary) 0%, rgba(26, 10, 46, 0.8) 100%);
            border: 2px solid var(--neon-pink);
            border-radius: 8px;
            padding: 20px;
            margin-top: 30px;
            box-shadow:
                0 0 20px rgba(255, 0, 255, 0.3),
                inset 0 0 20px rgba(255, 0, 255, 0.1);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-family: 'Orbitron', sans-serif;
            font-size: 32px;
            font-weight: bold;
            color: var(--neon-cyan);
            text-shadow: 0 0 10px var(--neon-cyan);
        }

        .stat-label {
            font-size: 14px;
            color: #a8a8ff;
            margin-top: 5px;
        }

        /* Navigation */
        .nav-footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
        }

        .nav-link {
            display: inline-block;
            margin: 0 10px;
            padding: 10px 20px;
            background: rgba(255, 0, 255, 0.1);
            border: 2px solid var(--neon-cyan);
            border-radius: 4px;
            color: var(--neon-cyan);
            text-decoration: none;
            font-size: 14px;
            transition: all 0.3s;
        }

        .nav-link:hover {
            background: rgba(0, 255, 255, 0.2);
            box-shadow: 0 0 15px var(--neon-cyan);
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav>
        <div class="nav-container">
            <div class="nav-brand">
                <span class="brand-icon">âš¡</span>
                <span class="brand-text">ZTLæ•°æ™ºåŒ–ä½œæˆ˜ä¸­å¿ƒ</span>
            </div>
            <div class="nav-links">
                <a href="pages/index.html" class="nav-link">ğŸ  é¦–é¡µ</a>
                <a href="ZTLæ•°æ™ºåŒ–ä½œæˆ˜ä¸­å¿ƒé¡¹ç›®ä»‹ç».html" class="nav-link">ğŸ“– é¡¹ç›®ä»‹ç»</a>
                <a href="architecture.html" class="nav-link">ğŸ—ï¸ æ¶æ„å›¾</a>
                <a href="pages/agents.html" class="nav-link">ğŸ¤– æ™ºèƒ½ä½“</a>
                <a href="pages/skills.html" class="nav-link">ğŸ› ï¸ æŠ€èƒ½åŒ…</a>
                <a href="pages/commands.html" class="nav-link">âŒ¨ï¸ å‘½ä»¤</a>
                <a href="mcp-servers.html" class="nav-link">ğŸ”Œ MCPæœåŠ¡</a>
                <a href="use-cases.html" class="nav-link">ğŸ’¡ ç”¨ä¾‹</a>
            </div>
        </div>
    </nav>

    <div class="container">
        <!-- Header -->
        <div class="page-header">
            <h1>æ™ºèƒ½ä½“ç½‘ç»œæ‹“æ‰‘</h1>
            <p>71 AGENTS | 8 BATTLE GROUPS | DISTRIBUTED ORCHESTRATION</p>
        </div>

        <!-- Control Panel -->
        <div class="control-panel">
            <div class="control-group">
                <label>å¸ƒå±€ç®—æ³•:</label>
                <select id="layoutSelector">
                    <option value="dagre">å±‚æ¬¡å¸ƒå±€ (Dagre)</option>
                    <option value="circle">ç¯å½¢å¸ƒå±€ (Circle)</option>
                    <option value="concentric">åŒå¿ƒåœ†å¸ƒå±€ (Concentric)</option>
                    <option value="grid">ç½‘æ ¼å¸ƒå±€ (Grid)</option>
                </select>
            </div>
            <div class="control-group">
                <label>æ˜¾ç¤ºè¿‡æ»¤:</label>
                <select id="groupFilter">
                    <option value="all">å…¨éƒ¨æ˜¾ç¤º</option>
                    <option value="F">Fç³»åˆ— - å¼€å‘ç»„</option>
                    <option value="G">Gç³»åˆ— - æˆ˜ç•¥ç»„</option>
                    <option value="X">Xç³»åˆ— - åˆ›æ„ç»„</option>
                    <option value="E">Eç³»åˆ— - æƒ…æŠ¥ç»„</option>
                    <option value="R">Rç³»åˆ— - è¡Œæ”¿ç»„</option>
                    <option value="V">Vç³»åˆ— - ç¾å›¢ç»„</option>
                    <option value="Z">Zç³»åˆ— - ç­¹å»ºç»„</option>
                    <option value="C">Cç³»åˆ— - ä¾›åº”ç»„</option>
                </select>
            </div>
            <div class="control-group">
                <button id="resetBtn">é‡ç½®è§†å›¾</button>
            </div>
        </div>

        <!-- Network Visualization -->
        <div class="network-container">
            <div id="cy"></div>
        </div>

        <!-- Legend -->
        <div class="legend">
            <div class="legend-title">ä¸šåŠ¡ç»„å›¾ä¾‹</div>
            <div class="legend-grid">
                <div class="legend-item">
                    <div class="legend-color" style="background: var(--color-F); color: var(--color-F);"></div>
                    <div class="legend-label">Fç³»åˆ— - å¼€å‘ç»„ (11)</div>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: var(--color-G); color: var(--color-G);"></div>
                    <div class="legend-label">Gç³»åˆ— - æˆ˜ç•¥ç»„ (9)</div>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: var(--color-X); color: var(--color-X);"></div>
                    <div class="legend-label">Xç³»åˆ— - åˆ›æ„ç»„ (9)</div>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: var(--color-E); color: var(--color-E);"></div>
                    <div class="legend-label">Eç³»åˆ— - æƒ…æŠ¥ç»„ (8)</div>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: var(--color-R); color: var(--color-R);"></div>
                    <div class="legend-label">Rç³»åˆ— - è¡Œæ”¿ç»„ (9)</div>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: var(--color-V); color: var(--color-V);"></div>
                    <div class="legend-label">Vç³»åˆ— - ç¾å›¢ç»„ (6)</div>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: var(--color-Z); color: var(--color-Z);"></div>
                    <div class="legend-label">Zç³»åˆ— - ç­¹å»ºç»„ (6)</div>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: var(--color-C); color: var(--color-C);"></div>
                    <div class="legend-label">Cç³»åˆ— - ä¾›åº”ç»„ (7)</div>
                </div>
            </div>
        </div>

        <!-- Stats Panel -->
        <div class="stats-panel">
            <div class="stats-grid">
                <div class="stat-item">
                    <div class="stat-value">71</div>
                    <div class="stat-label">æ€»æ™ºèƒ½ä½“æ•°</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">8</div>
                    <div class="stat-label">æˆ˜æ–—å°ç»„</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">65</div>
                    <div class="stat-label">ä¸“å®¶æ™ºèƒ½ä½“</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">8</div>
                    <div class="stat-label">ç»„é•¿æ™ºèƒ½ä½“</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">34</div>
                    <div class="stat-label">æŠ€èƒ½åŒ…é›†æˆ</div>
                </div>
            </div>
        </div>

        <!-- Navigation -->
        <div class="nav-footer">
            <a href="ZTLæ•°æ™ºåŒ–ä½œæˆ˜ä¸­å¿ƒé¡¹ç›®ä»‹ç».html" class="nav-link">ğŸ  è¿”å›é¦–é¡µ</a>
            <a href="architecture.html" class="nav-link">ğŸ—ï¸ æ¶æ„è§†å›¾</a>
            <a href="battle-plan-visualizer.html" class="nav-link">âš”ï¸ ä½œæˆ˜æŒ‡ä»¤</a>
            <a href="mcp-servers.html" class="nav-link">ğŸ”§ MCPæœåŠ¡å™¨</a>
        </div>
    </div>

    <script>
        // Agent Network Data (71 agents across 8 groups)
        const agentData = {
            F: ['FF-å¼€å‘å›¢é˜Ÿç»„é•¿', 'F0-äº§å“ç»ç†', 'F1-å‰ç«¯å¼€å‘', 'F2-ç»„ä»¶å¼€å‘', 'F3-æ•°æ®åº“å¼€å‘', 'F4-APIå¼€å‘', 'F5-åç«¯å¼€å‘', 'F6-AIé›†æˆå¼€å‘', 'F7-æµ‹è¯•æ€§èƒ½å·¥ç¨‹å¸ˆ', 'F8-ç‰ˆæœ¬æ§åˆ¶åŠ©æ‰‹', 'F9-äº‘éƒ¨ç½²ç®¡ç†'],
            G: ['GG-æˆ˜ç•¥ç»„ç»„é•¿', 'G0-æˆ˜ç•¥éœ€æ±‚è§£æå¸ˆ', 'G1-ç»è¥åˆ†æä¼˜åŒ–å¸ˆ', 'G2-äº§å“åŠ›æ‰“é€ ä¸“å®¶', 'G3-åŒºåŸŸæ‰©å¼ ç­–ç•¥å¸ˆ', 'G4-å•†ä¸šæ¨¡å¼è®¾è®¡å¸ˆ', 'G5-è¿é”å¤åˆ¶ä¸“å®¶', 'G6-æ•°å­—åŒ–è½¬å‹æ¶æ„å¸ˆ', 'G7-ç²¾ç»†åŒ–ç®¡ç†ä¸“å®¶'],
            X: ['XX-åˆ›æ„ç»„ç»„é•¿', 'X0-å†…å®¹åˆ›æ„éœ€æ±‚åˆ†æå¸ˆ', 'X1-å¹¿å‘Šç­–åˆ’å¸ˆ', 'X2-æ–‡æ¡ˆåˆ›ä½œå¸ˆ', 'X3-è®¾è®¡æ¨¡æ¿è§£æ„å¸ˆ', 'X4-å“ç‰ŒStyleç­–åˆ’å¸ˆ', 'X5-Canvaså›¾æ–‡æ’ç‰ˆå¸ˆ', 'X6-Reactå‰ç«¯è®¾è®¡å¸ˆ', 'X7-GifåŠ¨å›¾è®¾è®¡å¸ˆ', 'X8-ç®—æ³•è‰ºæœ¯å®¶', 'X9-AIGCå›¾ç‰‡å¤„ç†', 'X10-AIGCéŸ³ä¹åˆ›ä½œ', 'X11-AIGCè§†é¢‘ç”Ÿæˆ', 'X12-AIGCè¯­éŸ³åˆæˆ'],
            E: ['EE-æƒ…æŠ¥ç»„ç»„é•¿', 'E0-æƒ…æŠ¥éœ€æ±‚åˆ†æå¸ˆ', 'E1-æ·±åº¦è°ƒç ”å‘˜', 'E2-Chromeç½‘é¡µé‡‡é›†', 'E3-æ·±åº¦çˆ¬è™«', 'E4-æ·±åº¦æƒ…æŠ¥åˆ†æ', 'E5-COSå­˜å‚¨ç®¡ç†', 'E6-Supabaseæ•°æ®åº“ç®¡ç†'],
            R: ['RR-è¡Œæ”¿ç»„ç»„é•¿', 'R0-åŠå…¬ä¸šåŠ¡éœ€æ±‚åˆ†æå‘˜', 'R1-è´¢åŠ¡ç®¡ç†å‘˜', 'R2-äººäº‹ç®¡ç†å‘˜', 'R3-æ³•åŠ¡ä¸“å®¶', 'R4-ç§˜ä¹¦', 'R5-é£ä¹¦ç®¡ç†å‘˜', 'R6-æ–‡ä»¶ç®¡ç†å‘˜', 'R7-å­˜å‚¨ç®¡ç†å‘˜'],
            V: ['VV-ç¾å›¢ç»„ç»„é•¿', 'V0-åŠå…¬ä¸šåŠ¡éœ€æ±‚åˆ†æå‘˜', 'V1-è¿è¥ç®¡ç†å‘˜', 'V2-è¥é”€ç®¡ç†å‘˜', 'V4-æŠ¥è¡¨ç®¡ç†å‘˜', 'V5-ç½‘é¡µè‡ªåŠ¨åŒ–'],
            Z: ['ZZ-ç­¹å»ºç»„ç»„é•¿', 'Z0-ç­¹å»ºé¡¹ç›®éœ€æ±‚åˆ†æå¸ˆ', 'Z1-å¹³é¢å›¾è®¡åˆ’å¸ˆ', 'Z2-ç©ºé—´è®¾è®¡å¸ˆ', 'Z3-3Dç”ŸæˆAIGCåŠ©æ‰‹', 'Z4-å»ºç­‘åŠ¨ç”»AIGCåŠ©æ‰‹'],
            C: ['CC-ä¾›åº”ç»„ç»„é•¿', 'C0-ä¾›åº”éœ€æ±‚åˆ†æå¸ˆ', 'C1-é‡‡è´­æ‰§è¡Œç»ç†', 'C2-åº“å­˜ç®¡ç†å‘˜', 'C3-æˆæœ¬å¡ç®¡ç†å‘˜', 'C4-ä¾›åº”å•†ç®¡ç†å‘˜', 'C5-åˆ†è´¦ç®¡ç†å‘˜']
        };

        // Color mapping
        const groupColors = {
            'F': '#00BFFF',  // æ·±ç©ºè“
            'G': '#FF1493',  // ç«çº¢
            'X': '#9400D3',  // ç´«ç½—å…°
            'E': '#00FA9A',  // è–„è·ç»¿
            'R': '#FF6347',  // ç•ªèŒ„çº¢
            'V': '#FFD700',  // é‡‘é»„
            'Z': '#32CD32',  // é…¸æ©™ç»¿
            'C': '#FF8C00'   // æš—æ©™
        };

        // Build network elements
        const elements = [];

        // Add group leader nodes
        Object.keys(agentData).forEach(group => {
            const leader = agentData[group][0];
            elements.push({
                data: {
                    id: leader,
                    label: leader,
                    group: group,
                    isLeader: true
                }
            });
        });

        // Add member nodes and edges
        Object.keys(agentData).forEach(group => {
            const agents = agentData[group];
            const leader = agents[0];

            for (let i = 1; i < agents.length; i++) {
                const agent = agents[i];

                // Add agent node
                elements.push({
                    data: {
                        id: agent,
                        label: agent,
                        group: group,
                        isLeader: false
                    }
                });

                // Add edge to leader
                elements.push({
                    data: {
                        id: `${leader}-${agent}`,
                        source: leader,
                        target: agent
                    }
                });
            }
        });

        // Add cross-group collaborations (selected examples)
        const collaborations = [
            ['FF-å¼€å‘ç»„ç»„é•¿', 'XX-åˆ›æ„ç»„ç»„é•¿'],  // å¼€å‘-åˆ›æ„åä½œ
            ['GG-æˆ˜ç•¥ç»„ç»„é•¿', 'VV-ç¾å›¢ç»„ç»„é•¿'],  // æˆ˜ç•¥-ç¾å›¢åä½œ
            ['EE-æƒ…æŠ¥ç»„ç»„é•¿', 'GG-æˆ˜ç•¥ç»„ç»„é•¿'],  // æƒ…æŠ¥-æˆ˜ç•¥åä½œ
            ['RR-è¡Œæ”¿ç»„ç»„é•¿', 'CC-ä¾›åº”ç»„ç»„é•¿'],  // è¡Œæ”¿-ä¾›åº”åä½œ
            ['ZZ-ç­¹å»ºç»„ç»„é•¿', 'XX-åˆ›æ„ç»„ç»„é•¿'],  // ç­¹å»º-åˆ›æ„åä½œ
            ['X3-å¹³é¢è®¾è®¡å¸ˆ', 'V3-AIGCæ–‡ç”Ÿå›¾è®¾è®¡å¸ˆ'],  // è®¾è®¡å¸ˆåä½œ
        ];

        collaborations.forEach(([source, target]) => {
            elements.push({
                data: {
                    id: `collab-${source}-${target}`,
                    source: source,
                    target: target,
                    collaboration: true
                }
            });
        });

        // Initialize Cytoscape
        const cy = cytoscape({
            container: document.getElementById('cy'),
            elements: elements,
            style: [
                {
                    selector: 'node',
                    style: {
                        'background-color': function(ele) {
                            return groupColors[ele.data('group')];
                        },
                        'label': 'data(label)',
                        'color': '#ffffff',
                        'text-valign': 'center',
                        'text-halign': 'center',
                        'font-size': function(ele) {
                            return ele.data('isLeader') ? '14px' : '10px';
                        },
                        'font-family': 'Electrolize',
                        'text-outline-color': '#0a0a0f',
                        'text-outline-width': 2,
                        'width': function(ele) {
                            return ele.data('isLeader') ? 60 : 40;
                        },
                        'height': function(ele) {
                            return ele.data('isLeader') ? 60 : 40;
                        },
                        'border-width': function(ele) {
                            return ele.data('isLeader') ? 4 : 2;
                        },
                        'border-color': function(ele) {
                            return groupColors[ele.data('group')];
                        },
                        'box-shadow': function(ele) {
                            const color = groupColors[ele.data('group')];
                            return `0 0 20px ${color}`;
                        }
                    }
                },
                {
                    selector: 'edge',
                    style: {
                        'width': function(ele) {
                            return ele.data('collaboration') ? 2 : 1;
                        },
                        'line-color': function(ele) {
                            if (ele.data('collaboration')) {
                                return '#ff00ff';
                            }
                            const sourceGroup = cy.$id(ele.data('source')).data('group');
                            return groupColors[sourceGroup];
                        },
                        'line-style': function(ele) {
                            return ele.data('collaboration') ? 'dashed' : 'solid';
                        },
                        'target-arrow-shape': 'triangle',
                        'target-arrow-color': function(ele) {
                            if (ele.data('collaboration')) {
                                return '#ff00ff';
                            }
                            const sourceGroup = cy.$id(ele.data('source')).data('group');
                            return groupColors[sourceGroup];
                        },
                        'curve-style': 'bezier',
                        'opacity': 0.6
                    }
                },
                {
                    selector: 'node:selected',
                    style: {
                        'border-width': 6,
                        'border-color': '#00ffff',
                        'box-shadow': '0 0 30px #00ffff'
                    }
                },
                {
                    selector: 'edge:selected',
                    style: {
                        'width': 4,
                        'line-color': '#00ffff',
                        'target-arrow-color': '#00ffff',
                        'opacity': 1
                    }
                }
            ],
            layout: {
                name: 'dagre',
                rankDir: 'TB',
                nodeSep: 50,
                rankSep: 100,
                padding: 30
            },
            minZoom: 0.3,
            maxZoom: 3,
            wheelSensitivity: 0.2
        });

        // Layout selector
        document.getElementById('layoutSelector').addEventListener('change', function(e) {
            const layoutName = e.target.value;
            let layoutOptions = { name: layoutName, padding: 30, animate: true };

            if (layoutName === 'dagre') {
                layoutOptions.rankDir = 'TB';
                layoutOptions.nodeSep = 50;
                layoutOptions.rankSep = 100;
            } else if (layoutName === 'concentric') {
                layoutOptions.concentric = function(node) {
                    return node.data('isLeader') ? 10 : 1;
                };
                layoutOptions.levelWidth = function() { return 2; };
            } else if (layoutName === 'circle') {
                layoutOptions.radius = 400;
            }

            cy.layout(layoutOptions).run();
        });

        // Group filter
        document.getElementById('groupFilter').addEventListener('change', function(e) {
            const selectedGroup = e.target.value;

            if (selectedGroup === 'all') {
                cy.elements().style('display', 'element');
            } else {
                cy.nodes().forEach(node => {
                    if (node.data('group') === selectedGroup) {
                        node.style('display', 'element');
                        node.connectedEdges().style('display', 'element');
                    } else {
                        node.style('display', 'none');
                    }
                });

                // Hide collaboration edges if both nodes are hidden
                cy.edges().forEach(edge => {
                    const source = cy.$id(edge.data('source'));
                    const target = cy.$id(edge.data('target'));
                    if (source.style('display') === 'none' || target.style('display') === 'none') {
                        edge.style('display', 'none');
                    }
                });
            }
        });

        // Reset button
        document.getElementById('resetBtn').addEventListener('click', function() {
            cy.fit();
            cy.zoom(1);
            cy.center();
        });

        // Node click event
        cy.on('tap', 'node', function(evt) {
            const node = evt.target;
            console.log('Clicked node:', node.data());

            // Highlight connected nodes
            cy.elements().removeClass('highlighted');
            node.addClass('highlighted');
            node.neighborhood().addClass('highlighted');
        });

        // Initial fit
        cy.fit();
    </script>
</body>
</html>
