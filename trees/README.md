# Trees ç›®å½•è¯´æ˜

## ğŸ“ ç›®å½•ç”¨é€”

è¿™ä¸ªç›®å½•æ˜¯**å¹¶è¡Œå¼€å‘å·¥ä½œç©ºé—´**çš„ä¸“ç”¨å­˜æ”¾ä½ç½®,ç”¨äºå­˜å‚¨é€šè¿‡ Git Worktree åˆ›å»ºçš„ç‹¬ç«‹å·¥ä½œç¯å¢ƒã€‚

## ğŸ¯ ä¸»è¦åŠŸèƒ½

### ä¸ `/R` å‘½ä»¤é…åˆä½¿ç”¨

å½“æ‰§è¡Œ `/R` (å¹¶è¡Œä»»åŠ¡å‡†å¤‡ä¸æ‰§è¡Œ)å‘½ä»¤æ—¶,ç³»ç»Ÿä¼š:

1. **è‡ªåŠ¨åˆ›å»ºå¤šä¸ª worktree** - æ¯ä¸ªç‹¬ç«‹çš„å¼€å‘åˆ†æ”¯
2. **å­˜æ”¾åœ¨æ­¤ç›®å½•** - æ‰€æœ‰ worktree ç»Ÿä¸€ç®¡ç†
3. **å¹¶è¡Œå¼€å‘** - å¤šä¸ª AI Agent åŒæ—¶åœ¨ä¸åŒæ–¹æ¡ˆä¸Šå·¥ä½œ
4. **ç»“æœå¯¹æ¯”** - å®Œæˆåå¯¹æ¯”é€‰æ‹©æœ€ä½³å®ç°

### å…¸å‹ç›®å½•ç»“æ„

```
trees/
â”œâ”€â”€ feature-name-1/          # Agent-1 çš„å·¥ä½œç©ºé—´
â”‚   â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ RESULTS.md          # å®ç°æŠ¥å‘Š
â”‚   â””â”€â”€ ...
â”œâ”€â”€ feature-name-2/          # Agent-2 çš„å·¥ä½œç©ºé—´
â”‚   â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ RESULTS.md
â”‚   â””â”€â”€ ...
â””â”€â”€ feature-name-3/          # Agent-3 çš„å·¥ä½œç©ºé—´
    â”œâ”€â”€ src/
    â”œâ”€â”€ RESULTS.md
    â””â”€â”€ ...
```

## ğŸ”§ ä½¿ç”¨ç¤ºä¾‹

### åˆ›å»ºå¹¶è¡Œå·¥ä½œç©ºé—´
```bash
# æ–¹å¼1: æŒ‡å®šå‚æ•°
/R "new-feature" 3 "å®ç°æ–°åŠŸèƒ½çš„è¯¦ç»†æè¿°..."

# æ–¹å¼2: ä½¿ç”¨é»˜è®¤PRP
/R
```

### æŸ¥çœ‹å·¥ä½œç©ºé—´
```bash
# åˆ—å‡ºæ‰€æœ‰ worktree
git worktree list

# è¿›å…¥ç‰¹å®šå·¥ä½œç©ºé—´
cd trees/new-feature-1
```

### æ¸…ç†å·¥ä½œç©ºé—´
```bash
# åˆ é™¤æŒ‡å®š worktree
git worktree remove trees/new-feature-1

# æˆ–å¼ºåˆ¶åˆ é™¤(åŒ…å«æœªæäº¤æ›´æ”¹)
git worktree remove --force trees/new-feature-1

# åˆ é™¤å¯¹åº”åˆ†æ”¯
git branch -D new-feature-1
```

## âš ï¸ æ³¨æ„äº‹é¡¹

### ä¸è¦æ‰‹åŠ¨åˆ›å»ºå­ç›®å½•
- âŒ ä¸è¦æ‰‹åŠ¨åœ¨ `trees/` ä¸‹åˆ›å»ºæ–‡ä»¶å¤¹
- âœ… å§‹ç»ˆé€šè¿‡ `/R` å‘½ä»¤æˆ– Git Worktree å‘½ä»¤åˆ›å»º

### Git çŠ¶æ€ç‹¬ç«‹
- æ¯ä¸ª worktree æœ‰ç‹¬ç«‹çš„ Git å·¥ä½œåŒº
- å¯ä»¥åœ¨ä¸åŒ worktree ä¸­åˆ‡æ¢åˆ°ä¸åŒåˆ†æ”¯
- ä¿®æ”¹äº’ä¸å½±å“,å®Œå…¨éš”ç¦»

### ç£ç›˜ç©ºé—´è€ƒè™‘
- æ¯ä¸ª worktree ä¼šå ç”¨å®Œæ•´é¡¹ç›®å¤§å°çš„ç©ºé—´
- å»ºè®®å¹¶è¡Œæ•°é‡æ§åˆ¶åœ¨ 2-5 ä¸ª
- åŠæ—¶æ¸…ç†ä¸éœ€è¦çš„ worktree

## ğŸš€ å·¥ä½œæµç¤ºä¾‹

### æ ‡å‡†å¹¶è¡Œå¼€å‘æµç¨‹

```bash
# 1. åˆ›å»ºå¹¶è¡Œå·¥ä½œç©ºé—´
/R "user-auth" 3 "å®ç°ç”¨æˆ·è®¤è¯åŠŸèƒ½..."

# 2. ç­‰å¾… Agent å®Œæˆ(è‡ªåŠ¨å¹¶è¡Œæ‰§è¡Œ)
# Agent-1ã€Agent-2ã€Agent-3 åŒæ—¶å·¥ä½œ

# 3. æŸ¥çœ‹ç»“æœ
cat trees/user-auth-1/RESULTS.md
cat trees/user-auth-2/RESULTS.md
cat trees/user-auth-3/RESULTS.md

# 4. å¯¹æ¯”é€‰æ‹©æœ€ä½³æ–¹æ¡ˆ
cd trees/user-auth-2  # å‡è®¾é€‰æ‹©æ–¹æ¡ˆ2

# 5. åˆå¹¶åˆ°ä¸»åˆ†æ”¯
git checkout main
git merge user-auth-2

# 6. æ¸…ç†å…¶ä»–æ–¹æ¡ˆ
git worktree remove --force trees/user-auth-1
git worktree remove --force trees/user-auth-3
git branch -D user-auth-1 user-auth-3
```

## ğŸ­ Git Worktree å·¥ä½œæœºåˆ¶è¯¦è§£

### æ ¸å¿ƒæ¦‚å¿µ:"é¡¹ç›®åˆ†èº«"

å½“æ‰§è¡Œ `/R` å‘½ä»¤åˆ›å»ºå¹¶è¡Œå·¥ä½œç©ºé—´æ—¶,å®é™…ä¸Šæ˜¯åˆ›å»ºäº†**å¤šä¸ªå®Œæ•´çš„é¡¹ç›®å‰¯æœ¬**:

```
ä¸»é¡¹ç›® (main branch)
    â†“
Git Worktree æœºåˆ¶
    â†“
åˆ›å»ºå¤šä¸ª"åˆ†èº«"å‰¯æœ¬
    â†“
â”œâ”€â”€ trees/todo-manager-1/  â† å®Œæ•´çš„é¡¹ç›®å‰¯æœ¬(åˆ†æ”¯: todo-manager-1)
â”œâ”€â”€ trees/todo-manager-2/  â† å®Œæ•´çš„é¡¹ç›®å‰¯æœ¬(åˆ†æ”¯: todo-manager-2)
â””â”€â”€ trees/todo-manager-3/  â† å®Œæ•´çš„é¡¹ç›®å‰¯æœ¬(åˆ†æ”¯: todo-manager-3)
```

### æ¯ä¸ª"åˆ†èº«"åŒ…å«ä»€ä¹ˆ?

æ‰§è¡Œ `git worktree add -b feature-1 ./trees/feature-1` æ—¶ä¼šåˆ›å»º:

```
trees/feature-1/
â”œâ”€â”€ .claude/              â† å®Œæ•´å¤åˆ¶
â”œâ”€â”€ src/                  â† å®Œæ•´å¤åˆ¶
â”œâ”€â”€ README.md             â† å®Œæ•´å¤åˆ¶
â”œâ”€â”€ package.json          â† å®Œæ•´å¤åˆ¶
â””â”€â”€ ... (æ‰€æœ‰é¡¹ç›®æ–‡ä»¶)   â† å®Œæ•´å¤åˆ¶
```

**å…³é”®ç‰¹æ€§**:
- âœ… æ¯ä¸ª worktree æ˜¯**å®Œæ•´çš„é¡¹ç›®å‰¯æœ¬**
- âœ… æ‹¥æœ‰**ç‹¬ç«‹çš„ Git åˆ†æ”¯**
- âœ… æ–‡ä»¶ä¿®æ”¹**äº’ä¸å½±å“**
- âœ… å…±äº«**åŒä¸€ä¸ª .git ä»“åº“**(èŠ‚çœç©ºé—´)

### å®Œæ•´æµç¨‹å›¾

```
1. åˆ›å»ºé˜¶æ®µ
   ä¸»é¡¹ç›® â†’ git worktree add â†’ trees/feature-1/ (å®Œæ•´å‰¯æœ¬)
                             â†’ trees/feature-2/ (å®Œæ•´å‰¯æœ¬)
                             â†’ trees/feature-3/ (å®Œæ•´å‰¯æœ¬)

2. æ‰§è¡Œé˜¶æ®µ
   Agent-1 åœ¨ trees/feature-1/ ç‹¬ç«‹å·¥ä½œ â†’ ä¿®æ”¹æ–‡ä»¶ â†’ feature-1 åˆ†æ”¯
   Agent-2 åœ¨ trees/feature-2/ ç‹¬ç«‹å·¥ä½œ â†’ ä¿®æ”¹æ–‡ä»¶ â†’ feature-2 åˆ†æ”¯
   Agent-3 åœ¨ trees/feature-3/ ç‹¬ç«‹å·¥ä½œ â†’ ä¿®æ”¹æ–‡ä»¶ â†’ feature-3 åˆ†æ”¯

3. å¯¹æ¯”é˜¶æ®µ
   å¯¹æ¯” 3 ä¸ªåˆ†æ”¯çš„å®ç° â†’ é€‰æ‹©æœ€ä½³æ–¹æ¡ˆ â†’ åˆå¹¶åˆ°ä¸»åˆ†æ”¯

4. æ¸…ç†é˜¶æ®µ
   åˆ é™¤ worktree â†’ åˆ é™¤åˆ†æ”¯ â†’ ä¿ç•™æœ€ä½³å®ç°
```

### ç©ºé—´å ç”¨è¯´æ˜

å‡è®¾é¡¹ç›®å¤§å°æ˜¯ **100MB**:

```
ä¼ ç»Ÿä¼°ç®—:
ä¸»é¡¹ç›®:                    100MB
trees/feature-1/:          100MB  â† å®Œæ•´å‰¯æœ¬
trees/feature-2/:          100MB  â† å®Œæ•´å‰¯æœ¬
trees/feature-3/:          100MB  â† å®Œæ•´å‰¯æœ¬
-----------------------------------
é¢„è®¡æ€»è®¡:                  400MB

å®é™…å ç”¨(Git ä¼˜åŒ–å):
ä¸»é¡¹ç›® + .git:             100MB
trees/feature-1/:           50MB  â† åªå¤åˆ¶å·¥ä½œåŒºæ–‡ä»¶
trees/feature-2/:           50MB  â† .git æ•°æ®åº“å…±äº«
trees/feature-3/:           50MB  â† èŠ‚çœå¤§é‡ç©ºé—´
-----------------------------------
å®é™…æ€»è®¡:                  250MB
```

### ä¸ºä»€ä¹ˆéœ€è¦"åˆ†èº«"?

#### 1. å®Œå…¨éš”ç¦»
```bash
# Agent-1 åœ¨ trees/todo-manager-1/ ä¸­
# ä¿®æ”¹äº† src/auth.js
# ä¸ä¼šå½±å“ Agent-2 å’Œ Agent-3

# Agent-2 åœ¨ trees/todo-manager-2/ ä¸­
# å¯ä»¥å®Œå…¨é‡å†™ src/auth.js
# é‡‡ç”¨ä¸åŒçš„å®ç°æ–¹æ¡ˆ
```

#### 2. çœŸæ­£å¹¶è¡Œ
```
ä¼ ç»Ÿæ–¹å¼(ä¸²è¡Œ):
Agent-1 å®ç° â†’ æäº¤ â†’ Agent-2 å®ç° â†’ æäº¤ â†’ Agent-3 å®ç°
æ€»è€—æ—¶: 30åˆ†é’Ÿ + 30åˆ†é’Ÿ + 30åˆ†é’Ÿ = 90åˆ†é’Ÿ

Worktreeæ–¹å¼(å¹¶è¡Œ):
Agent-1 å®ç° â”
Agent-2 å®ç° â”œâ†’ åŒæ—¶è¿›è¡Œ
Agent-3 å®ç° â”˜
æ€»è€—æ—¶: 30åˆ†é’Ÿ
```

#### 3. ç‹¬ç«‹çš„ Git å†å²
```bash
# trees/todo-manager-1/ çš„æäº¤å†å²
commit abc123 (todo-manager-1)
    å®ç°äº†JSONå­˜å‚¨æ–¹æ¡ˆ

# trees/todo-manager-2/ çš„æäº¤å†å²
commit def456 (todo-manager-2)
    å®ç°äº†SQLiteå­˜å‚¨æ–¹æ¡ˆ

# ä¸¤è€…äº’ä¸å¹²æ‰°,å„è‡ªç»´æŠ¤ç‹¬ç«‹çš„æäº¤å†å²
```

### ä¸æ™®é€šåˆ†æ”¯çš„åŒºåˆ«

#### ä¼ ç»Ÿ Git åˆ†æ”¯åˆ‡æ¢
```bash
git checkout feature-1  # åˆ‡æ¢åˆ°åˆ†æ”¯1
# å·¥ä½œç›®å½•æ–‡ä»¶å˜åŒ–

git checkout feature-2  # åˆ‡æ¢åˆ°åˆ†æ”¯2
# å·¥ä½œç›®å½•æ–‡ä»¶å†æ¬¡å˜åŒ–

# é—®é¢˜: åªæœ‰ä¸€ä¸ªå·¥ä½œç›®å½•,æ— æ³•åŒæ—¶æŸ¥çœ‹ä¸¤ä¸ªåˆ†æ”¯
```

#### Git Worktree æ–¹å¼
```bash
cd trees/feature-1/     # æŸ¥çœ‹åˆ†æ”¯1çš„å®ç°
cd trees/feature-2/     # æŸ¥çœ‹åˆ†æ”¯2çš„å®ç°

# ä¼˜åŠ¿: å¯ä»¥åŒæ—¶æ‰“å¼€å¤šä¸ªç»ˆç«¯/ç¼–è¾‘å™¨
#       åŒæ—¶æŸ¥çœ‹/å¯¹æ¯”ä¸åŒæ–¹æ¡ˆ
#       æ— éœ€é¢‘ç¹åˆ‡æ¢åˆ†æ”¯
```

### Agent å·¥ä½œæ—¶çš„è§†è§’

```bash
# Agent-1 çš„è§†è§’
å½“å‰ç›®å½•: /project/trees/todo-manager-1
å½“å‰åˆ†æ”¯: todo-manager-1
å¯è§æ–‡ä»¶: å®Œæ•´çš„é¡¹ç›®æ–‡ä»¶(ç‹¬ç«‹å‰¯æœ¬)
ä¿®æ”¹èŒƒå›´: åªå½±å“ todo-manager-1 åˆ†æ”¯

# Agent-2 çš„è§†è§’
å½“å‰ç›®å½•: /project/trees/todo-manager-2
å½“å‰åˆ†æ”¯: todo-manager-2
å¯è§æ–‡ä»¶: å®Œæ•´çš„é¡¹ç›®æ–‡ä»¶(ç‹¬ç«‹å‰¯æœ¬)
ä¿®æ”¹èŒƒå›´: åªå½±å“ todo-manager-2 åˆ†æ”¯

# ä¸¤ä¸ª Agent å®Œå…¨æ„ŸçŸ¥ä¸åˆ°å¯¹æ–¹çš„å­˜åœ¨
```

### å®é™…æ“ä½œç¤ºä¾‹

#### åˆ›å»ºåˆ†èº«
```bash
# å‘½ä»¤
git worktree add -b todo-manager-1 ./trees/todo-manager-1

# å‘ç”Ÿäº†ä»€ä¹ˆ?
1. åˆ›å»ºæ–°åˆ†æ”¯ todo-manager-1
2. åœ¨ trees/todo-manager-1/ åˆ›å»ºå®Œæ•´é¡¹ç›®å‰¯æœ¬
3. åˆ‡æ¢åˆ°è¯¥åˆ†æ”¯
4. Agent-1 å¯ä»¥å¼€å§‹ç‹¬ç«‹å·¥ä½œäº†
```

#### å®Œæˆåå¯¹æ¯”
```bash
# æŸ¥çœ‹ Agent-1 çš„å®ç°
cd trees/todo-manager-1
cat src/todo.py          # å¯èƒ½ä½¿ç”¨äº† JSON å­˜å‚¨

# æŸ¥çœ‹ Agent-2 çš„å®ç°
cd trees/todo-manager-2
cat src/todo.py          # å¯èƒ½ä½¿ç”¨äº† SQLite å­˜å‚¨

# ä¸¤ä¸ªæ–‡ä»¶å†…å®¹å¯èƒ½å®Œå…¨ä¸åŒ!
# è¿™å°±æ˜¯å¹¶è¡Œæ¢ç´¢çš„ä»·å€¼
```

## ğŸ“Š æœ€ä½³å®è·µ

### ä½•æ—¶ä½¿ç”¨å¹¶è¡Œå¼€å‘

âœ… **é€‚åˆçš„åœºæ™¯**:
- æ¢ç´¢å¤šç§æŠ€æœ¯æ–¹æ¡ˆ
- A/B æµ‹è¯•ä¸åŒå®ç°
- å¿«é€ŸåŸå‹éªŒè¯
- å¹¶è¡Œå¼€å‘ç‹¬ç«‹æ¨¡å—

âŒ **ä¸é€‚åˆçš„åœºæ™¯**:
- ç®€å•çš„ bug ä¿®å¤
- å·²æœ‰æ˜ç¡®æœ€ä½³æ–¹æ¡ˆ
- ç£ç›˜ç©ºé—´ä¸¥é‡ä¸è¶³
- åŠŸèƒ½é—´å¼ºä¾èµ–

### æ¨èçš„å¹¶è¡Œæ•°é‡

- **ç®€å•åŠŸèƒ½**: 2 ä¸ªæ–¹æ¡ˆ
- **ä¸­ç­‰å¤æ‚åº¦**: 3 ä¸ªæ–¹æ¡ˆ
- **é«˜å¤æ‚åº¦**: 4 ä¸ªæ–¹æ¡ˆ
- **æœ€å¤§å»ºè®®**: 5 ä¸ªæ–¹æ¡ˆ

## ğŸ”— ç›¸å…³èµ„æº

- **å‘½ä»¤æ–‡æ¡£**: `.claude/commands/R.md`
- **PRP æ¨¡æ¿**: `.claude/PRPs/PRP.md`
- **é¡¹ç›®å¿«æ·é”®**: `.claude/commands/Q.md`

## ğŸ“ ç»´æŠ¤è®°å½•

- **åˆ›å»ºæ—¶é—´**: 2025-10-20
- **æœ€åæ›´æ–°**: 2025-10-20
- **æ›´æ–°å†…å®¹**: æ·»åŠ  Git Worktree å·¥ä½œæœºåˆ¶è¯¦è§£
- **ç»´æŠ¤åŸåˆ™**: ä¿æŒç›®å½•æ¸…æ´,åŠæ—¶æ¸…ç†è¿‡æœŸ worktree

---

**æç¤º**: è¿™ä¸ªç›®å½•é€šå¸¸åº”è¯¥ä¿æŒä¸ºç©ºæˆ–åªåŒ…å«æ´»è·ƒçš„ worktreeã€‚å®šæœŸæ¸…ç†å·²å®Œæˆçš„å¹¶è¡Œä»»åŠ¡!
