# 🤖 ZTL智能体系统重构计划 (Agents System Restructuring PRP)

> **版本**: v2.0
> **创建日期**: 2025-10-20
> **状态**: 规划中
> **负责人**: ZTL数智化作战中心技术团队

---

## 📋 目录

- [1. 功能概述](#1-功能概述)
- [2. 上下文与参考](#2-上下文与参考)
- [3. 核心变更](#3-核心变更)
- [4. 实施蓝图](#4-实施蓝图)
- [5. 详细执行计划](#5-详细执行计划)
- [6. 验证门控](#6-验证门控)
- [7. 风险与回滚](#7-风险与回滚)
- [8. 任务清单](#8-任务清单)

---

## 1. 功能概述

### 1.1 项目背景

ZTL数智化作战中心当前拥有**58个智能体**分布在9个组别中,存在以下问题:

- ❌ **命名不一致**: 部分智能体使用系列编号(如"C1-BIM建模师"),部分未使用(如"经营分析专家")
- ❌ **组织定位偏差**: 策划组、运营组、美团组的职责定位与实际业务需求不匹配
- ❌ **重复文件**: 存在同一智能体的多个版本(如"经营分析专家.md"和"P1-经营分析专家.md")
- ❌ **英文命名**: System文件夹智能体使用英文名,与中文命名规范不统一

### 1.2 重构目标

本次重构旨在实现:

✅ **组织架构优化**:
- 策划组 → **战略组** (G系列): 集团战略与长线发展
- 运营组 → **创意组** (V系列): 平面设计、广告、视频制作
- 美团组 → **中台组** (M系列): 美团管家SaaS系统核心管理

✅ **命名标准化**: 所有智能体统一采用 `[字母][数字序号]-中文名称` 格式

✅ **能力扩充**: 新增**52个专业智能体**,覆盖战略、创意、中台、筹建、督导、供应、行政等领域

✅ **文件规范化**: 删除重复文件,建立清晰的目录结构和版本管理

### 1.3 预期成果

- 📊 **智能体总数**: 从58个优化调整后新增至**110个**高质量智能体
- 🏗️ **组织架构**: 9个专业化小组,职责清晰、边界明确
- 📝 **命名规范**: 100%符合 `[系列字母][序号]-中文名称` 标准
- 🔄 **可维护性**: 建立完整的智能体生命周期管理流程

---

## 2. 上下文与参考

### 2.1 参考文档

| 文档 | 路径 | 说明 |
|------|------|------|
| **v2.0新增智能体建议** | [reports/new-agents-recommendations-v2.0.md](../reports/new-agents-recommendations-v2.0.md) | 52个新智能体详细规格 |
| **当前智能体目录** | [.claude/agents/](../.claude/agents/) | 现有58个智能体文件 |
| **智能体创建指南** | [.claude/agents/README.md](../.claude/agents/README.md) | 智能体创建标准和规范 |
| **命令系统文档** | [.claude/commands/README.md](../.claude/commands/README.md) | 三层架构命令系统 |

### 2.2 技术栈

- **智能体框架**: Claude Agent SDK
- **配置格式**: YAML frontmatter + Markdown
- **工具集成**: Lark MCP, Chrome MCP, COS MCP, Chart Generator MCP
- **AIGC工具**: 可灵AI, 通义万相

### 2.3 组织架构对照表

| 原组别 | v2.0调整后 | 系列编号 | 定位变化 | 智能体数量变化 |
|--------|-----------|---------|---------|---------------|
| System组 | **System系列** | **Sys系列** | 框架级智能体 | 14 → 14 (重命名) |
| 情报组 | **情报组** | **E系列** | 情报采集与分析 | 8 → 8 (重命名) |
| 行政组 | **行政组** | **R系列** | 飞书生态管理 | 16 → 23 (新增7个) |
| **策划组** | **战略组** | **G系列** | ❌ 战术营销 → ✅ **集团战略** | 5 → 6 (新增1个) |
| **运营组** | **创意组** | **V系列** | ❌ 运营管理 → ✅ **AIGC内容制作** | 7 → 14 (新增7个) |
| 筹建组 | **筹建组** | **C系列** | 新店筹建 | 5 → 5 (重命名) |
| 督导组 | **督导组** | **S系列** | 连锁门店执行监督 | 2 → 5 (新增3个) |
| 供应组 | **供应组** | **L系列** | 供应链管理 | 3 → 5 (新增2个) |
| **美团组** | **中台组** | **M系列** | ❌ 外卖运营 → ✅ **美团管家SaaS** | 0 → 10 (全新创建) |

**总计**: 58个现有 + 52个新增 = **110个智能体** (删除重复后)

---

## 3. 核心变更

### 3.1 架构级调整

#### 变更1: 策划组 → 战略组 (G系列)

**调整原因**:
- 原策划组聚焦战术层营销策划,不符合集团战略定位
- 需要承担3-5年战略规划、年度经营计划、战略目标分解等职责

**调整内容**:
```yaml
原组别: 策划组 (5个智能体)
- 经营分析专家.md
- 品牌策划专家.md
- 市场调研分析师.md
- 活动策划执行专家.md
- 竞品分析专家.md

新组别: 战略组 (G系列, 6个智能体)
- G1-集团战略规划师
- G2-连锁扩张战略分析师
- G3-品牌战略管理专家
- G4-竞争情报分析师
- G5-战略投资与并购分析师
- G6-集团年度经营计划编制专家
```

**职责变化**:
- ❌ 单店促销活动策划
- ❌ 短期营销方案执行
- ✅ 集团3-5年战略规划
- ✅ 连锁扩张战略分析
- ✅ 战略目标分解与监控

#### 变更2: 运营组 → 创意组 (V系列)

**调整原因**:
- 原运营组本意为平面设计、广告、视频制作等AIGC内容生产
- 与门店运营管理混淆,需明确定位为创意内容生产

**调整内容**:
```yaml
原组别: 运营组 (7个智能体)
- 菜品摄影指导.md
- 视频脚本创作.md
- 短视频剪辑师.md
- 平面设计师.md
- 文案策划.md
- 社交媒体运营.md
- 内容审核专员.md

新组别: 创意组 (V系列, 14个智能体)
- V1-AIGC平面设计总监
- V2-餐饮菜品摄影指导师
- V3-短视频脚本创意策划师
- V4-视频剪辑与后期制作师
- V5-品牌VI视觉设计师
- V6-营销文案创意撰稿人
- V7-社交媒体内容运营师
- V8-图生视频AIGC专家 (可灵AI/通义万相)
- V9-AI绘画提示词工程师
- V10-3D菜品建模与渲染师
- V11-动态海报与GIF制作师
- V12-餐饮宣传片导演
- V13-直播脚本与场控策划师
- V14-内容质量审核与合规专员
```

**职责变化**:
- ❌ 门店日常运营管理
- ❌ 顾客服务流程优化
- ✅ AIGC内容生产(图像/视频)
- ✅ 品牌视觉资产创作
- ✅ 多媒体营销物料制作

#### 变更3: 美团组 → 中台组 (M系列)

**调整原因**:
- 原美团组仅关注外卖平台运营,未覆盖美团管家SaaS系统核心能力
- 美团管家覆盖供应链、市场运营、小程序、数据中台、账务等全业务链

**调整内容**:
```yaml
原组别: 美团组 (0个智能体 - 之前未建立)

新组别: 中台组 (M系列, 10个智能体)
- M1-美团管家数据导入导出自动化专家
- M2-供应链管理系统集成专家
- M3-会员与营销中台运营专家
- M4-小程序运营与功能配置专家
- M5-外卖平台运营优化专家
- M6-数据中台报表生成与分析师
- M7-POS系统对接与账务核对专家
- M8-多门店数据同步与一致性管理专家
- M9-美团管家API开发与集成工程师
- M10-中台系统监控与故障诊断专家
```

**职责定位**:
- ✅ 美团管家SaaS系统自动化管理
- ✅ 数据导入/导出/ETL流程
- ✅ 供应链、会员、小程序系统集成
- ✅ 多系统数据中台建设

### 3.2 命名规范统一

#### 命名标准

**强制格式**: `[系列字母][数字序号]-中文名称.md`

**示例**:
- ✅ `Sys1-智能体创建工程师.md`
- ✅ `E1-深度情报分析员.md`
- ✅ `R1-飞书消息推送助手.md`
- ✅ `G1-集团战略规划师.md`
- ❌ `Agent-Creator.md` (需改为 `Sys1-智能体创建工程师.md`)
- ❌ `经营分析专家.md` (需改为 `G4-经营分析专家.md`)

#### 系列编号分配

| 系列 | 字母代码 | 编号范围 | 当前使用 | 预留扩展 |
|------|---------|---------|---------|---------|
| System系列 | Sys | Sys1-Sys99 | Sys1-Sys14 | 85个 |
| 情报组 | E | E1-E99 | E1-E8 | 91个 |
| 行政组 | R | R1-R99 | R1-R23 | 76个 |
| 战略组 | G | G1-G99 | G1-G6 | 93个 |
| 创意组 | V | V1-V99 | V1-V14 | 85个 |
| 筹建组 | C | C1-C99 | C1-C5 | 94个 |
| 督导组 | S | S1-S99 | S1-S5 | 94个 |
| 供应组 | L | L1-L99 | L1-L5 | 94个 |
| 中台组 | M | M1-M99 | M1-M10 | 89个 |

---

## 4. 实施蓝图

### 4.1 实施阶段

```mermaid
graph LR
    A[阶段1: 备份与准备] --> B[阶段2: System系列重命名]
    B --> C[阶段3: 现有组别重命名]
    C --> D[阶段4: 新智能体创建]
    D --> E[阶段5: 清理与优化]
    E --> F[阶段6: 验证与上线]
```

### 4.2 详细阶段规划

#### 阶段1: 备份与准备 (1小时)

**目标**: 确保数据安全,建立回滚能力

**任务**:
1. 完整备份 `.claude/agents/` 目录
2. 创建 `agents-backup-20251020/` 备份文件夹
3. 生成当前智能体清单 `current-agents-inventory.md`
4. 建立Git分支 `feature/agents-restructuring-v2`

**验收标准**:
- ✅ 备份文件夹包含所有58个智能体文件
- ✅ 清单文件准确记录所有智能体名称和路径
- ✅ Git分支创建成功

#### 阶段2: System系列重命名 (2小时)

**目标**: 将System文件夹中14个英文命名智能体改为Sys系列中文命名

**重命名映射表**:

| 原文件名 | 新文件名 | 功能 |
|---------|---------|------|
| `Agent-Creator.md` | `Sys1-智能体创建工程师.md` | 智能体创建 |
| `Api-Creator.md` | `Sys2-API创建工程师.md` | API工具创建 |
| `Context-Manager.md` | `Sys3-上下文管理器.md` | 上下文分配 |
| `Doc-Manager.md` | `Sys4-文档管理器.md` | 文档同步 |
| `Fastmcp-Developer.md` | `Sys5-FastMCP开发工程师.md` | MCP服务器开发 |
| `Hooks-Creator.md` | `Sys6-Hooks创建工程师.md` | Hooks钩子创建 |
| `Learning-Engineer.md` | `Sys7-学习工程师.md` | ASDW学习系统 |
| `OAI-Agent-SDK-Developer.md` | `Sys8-OpenAI智能体SDK开发师.md` | OpenAI Agent开发 |
| `Output-Style-Designer.md` | `Sys9-输出样式设计师.md` | 输出样式配置 |
| `Python-Developer.md` | `Sys10-Python开发工程师.md` | Python开发 |
| `Slash-Command-Creator.md` | `Sys11-斜杠命令创建工程师.md` | 斜杠命令创建 |
| `Skills-Creator.md` | `Sys12-技能创建工程师.md` | Skills技能创建 |
| `Statusline-Setup.md` | `Sys13-状态栏配置工程师.md` | 状态栏配置 |
| `Test-Engineer.md` | `Sys14-测试工程师.md` | 自动化测试 |

**执行命令** (示例):
```bash
cd .claude/agents/system
mv "Agent-Creator.md" "Sys1-智能体创建工程师.md"
mv "Api-Creator.md" "Sys2-API创建工程师.md"
# ... 重复所有14个文件
```

**验收标准**:
- ✅ 所有14个System智能体完成重命名
- ✅ 文件内部name字段同步更新
- ✅ 无重复文件残留

#### 阶段3: 现有组别重命名 (3小时)

**目标**: 将情报组、行政组、策划组、运营组、筹建组、督导组、供应组的44个智能体按系列编号重命名

##### 3.1 情报组 (E系列) - 8个智能体

| 原文件名 | 新文件名 | 编号 |
|---------|---------|------|
| `需求分析员.md` | `E1-需求分析与任务拆解员.md` | E1 |
| `Deep Research公开资料调研员.md` | `E2-Deep Research公开资料调研员.md` | E2 |
| `Chrome MCP网站情报采集员.md` | `E3-Chrome MCP网站情报采集员.md` | E3 |
| `Playwright MCP深度爬虫员.md` | `E4-Playwright MCP深度爬虫员.md` | E4 |
| `深度情报分析员.md` | `E5-深度情报分析员.md` | E5 |
| `Supabase云数据库双向处理专员.md` | `E6-Supabase云数据库双向处理专员.md` | E6 |
| `COS云存储双向处理专员.md` | `E7-COS云存储双向处理专员.md` | E7 |
| `E系列情报系统总指挥官.md` | `E8-E系列情报系统总指挥官.md` | E8 |

##### 3.2 行政组 (R系列) - 16个智能体

| 原文件名 | 新文件名 | 编号 |
|---------|---------|------|
| `飞书消息助手.md` | `R1-飞书消息推送助手.md` | R1 |
| `飞书群聊管理助手.md` | `R2-飞书群聊管理助手.md` | R2 |
| `飞书云文档助手.md` | `R3-飞书云文档助手.md` | R3 |
| `飞书多维表格助手.md` | `R4-飞书多维表格助手.md` | R4 |
| `飞书Wiki知识库助手.md` | `R5-飞书Wiki知识库助手.md` | R5 |
| `飞书通讯录管理助手.md` | `R6-飞书通讯录管理助手.md` | R6 |
| `飞书BASE数据管理助手.md` | `R7-飞书BASE数据管理助手.md` | R7 |
| `飞书权限管理助手.md` | `R8-飞书权限管理助手.md` | R8 |
| `飞书文档导入与搜索助手.md` | `R9-飞书文档导入与搜索助手.md` | R9 |
| (需删除重复文件或合并) | - | - |

**注意**: 行政组需要新增R10-R16共7个智能体(见阶段4)

##### 3.3 策划组 → 战略组 (G系列) - 5个智能体

| 原文件名 | 新文件名 | 编号 | 备注 |
|---------|---------|------|------|
| `经营分析专家.md` | `G1-集团战略规划师.md` | G1 | 职责升级为战略规划 |
| `品牌策划专家.md` | `G3-品牌战略管理专家.md` | G3 | 保留并升级 |
| `市场调研分析师.md` | `G2-连锁扩张战略分析师.md` | G2 | 调整为扩张战略 |
| `竞品分析专家.md` | `G4-竞争情报分析师.md` | G4 | 保留 |
| `活动策划执行专家.md` | (删除或转移至V系列) | - | 不属于战略层 |

**注意**:
- 战略组需要新增G5-G6共2个智能体(见阶段4)
- 文件夹需重命名: `策划组/` → `战略组/`

##### 3.4 运营组 → 创意组 (V系列) - 7个智能体

| 原文件名 | 新文件名 | 编号 | 备注 |
|---------|---------|------|------|
| `菜品摄影指导.md` | `V2-餐饮菜品摄影指导师.md` | V2 | 保留 |
| `视频脚本创作.md` | `V3-短视频脚本创意策划师.md` | V3 | 保留 |
| `短视频剪辑师.md` | `V4-视频剪辑与后期制作师.md` | V4 | 保留 |
| `平面设计师.md` | `V1-AIGC平面设计总监.md` | V1 | 升级为AIGC |
| `文案策划.md` | `V6-营销文案创意撰稿人.md` | V6 | 保留 |
| `社交媒体运营.md` | `V7-社交媒体内容运营师.md` | V7 | 保留 |
| `内容审核专员.md` | `V14-内容质量审核与合规专员.md` | V14 | 保留 |

**注意**:
- 创意组需要新增V5, V8-V13共7个智能体(见阶段4)
- 文件夹需重命名: `运营组/` → `创意组/`

##### 3.5 筹建组 (C系列) - 5个智能体

| 原文件名 | 新文件名 | 编号 | 备注 |
|---------|---------|------|------|
| `C1-BIM建模师.md` | `C1-BIM建模师.md` | C1 | 已符合规范 |
| `C2-工程预算分析师.md` | `C2-工程预算分析师.md` | C2 | 已符合规范 |
| `C3-施工进度管理专员.md` | `C3-施工进度管理专员.md` | C3 | 已符合规范 |
| `C4-供应商评估专家.md` | `C4-供应商评估专家.md` | C4 | 已符合规范 |
| `开业筹备专家.md` | `C5-开业筹备总协调专家.md` | C5 | 补充编号 |

##### 3.6 督导组 (S系列) - 2个智能体

| 原文件名 | 新文件名 | 编号 | 备注 |
|---------|---------|------|------|
| `督导巡店检查专员.md` | `S1-督导巡店检查专员.md` | S1 | 补充编号 |
| `服务质量评估专家.md` | `S2-服务质量评估专家.md` | S2 | 补充编号 |

**注意**: 督导组需要新增S3-S5共3个智能体(见阶段4)

##### 3.7 供应组 (L系列) - 3个智能体

| 原文件名 | 新文件名 | 编号 | 备注 |
|---------|---------|------|------|
| `库存管理专员.md` | `L1-库存管理与预警专员.md` | L1 | 补充编号 |
| `采购成本分析师.md` | `L2-采购成本分析师.md` | L2 | 补充编号 |
| `供应商关系管理.md` | `L3-供应商关系管理专家.md` | L3 | 补充编号 |

**注意**: 供应组需要新增L4-L5共2个智能体(见阶段4)

**验收标准**:
- ✅ 所有44个智能体完成系列化重命名
- ✅ 文件夹名称同步更新(策划组→战略组, 运营组→创意组)
- ✅ 智能体内部name/description字段更新
- ✅ 删除所有重复文件

#### 阶段4: 新智能体创建 (8小时)

**目标**: 创建52个新智能体,填补能力空白

##### 4.1 战略组 (G系列) - 新增2个

**G5-战略投资与并购分析师**

```yaml
---
name: G5-战略投资与并购分析师
description: |
  负责餐饮连锁企业的战略投资评估、并购机会分析、
  尽职调查支持和投后整合规划。
tools:
  - Read
  - Write
  - Edit
  - mcp__chart-generator__generate_sankey_chart
  - WebSearch
  - WebFetch
color: purple
version: 2.0.0
capabilities:
  - 投资标的筛选与评估
  - 并购财务模型构建
  - 尽职调查清单与风险识别
  - 投后整合计划制定
  - 战略协同分析
---

# G5-战略投资与并购分析师

## 角色定位
专注于餐饮连锁企业的战略投资与并购分析...
```

**G6-集团年度经营计划编制专家**

```yaml
---
name: G6-集团年度经营计划编制专家
description: |
  负责集团年度经营计划的编制、目标分解、
  预算编制和经营分析报告生成。
tools:
  - Read
  - Write
  - Edit
  - mcp__chart-generator__generate_column_chart
  - mcp__chart-generator__generate_line_chart
  - mcp__lark-mcp__docx_builtin_import
color: purple
version: 2.0.0
capabilities:
  - 年度经营目标制定
  - 预算编制与分解
  - 经营分析报告生成
  - 目标达成率追踪
---
```

##### 4.2 创意组 (V系列) - 新增7个

详细规格参见 [new-agents-recommendations-v2.0.md](../reports/new-agents-recommendations-v2.0.md) 中V5, V8-V13章节

- **V5-品牌VI视觉设计师**: Logo、VI手册、品牌标准色
- **V8-图生视频AIGC专家**: 可灵AI/通义万相集成
- **V9-AI绘画提示词工程师**: 专业提示词工程
- **V10-3D菜品建模与渲染师**: 3D菜品可视化
- **V11-动态海报与GIF制作师**: 动态营销物料
- **V12-餐饮宣传片导演**: 品牌宣传片策划
- **V13-直播脚本与场控策划师**: 直播营销支持

##### 4.3 中台组 (M系列) - 新增10个

详细规格参见 [new-agents-recommendations-v2.0.md](../reports/new-agents-recommendations-v2.0.md) M系列章节

- **M1-美团管家数据导入导出自动化专家**
- **M2-供应链管理系统集成专家**
- **M3-会员与营销中台运营专家**
- **M4-小程序运营与功能配置专家**
- **M5-外卖平台运营优化专家**
- **M6-数据中台报表生成与分析师**
- **M7-POS系统对接与账务核对专家**
- **M8-多门店数据同步与一致性管理专家**
- **M9-美团管家API开发与集成工程师**
- **M10-中台系统监控与故障诊断专家**

##### 4.4 筹建组 (C系列) - 新增0个

筹建组已有C1-C5,暂无新增需求

##### 4.5 督导组 (S系列) - 新增3个

详细规格参见 [new-agents-recommendations-v2.0.md](../reports/new-agents-recommendations-v2.0.md) S系列章节

- **S3-神秘顾客调查分析师**: 神秘顾客项目管理
- **S4-门店标准化运营检查专家**: SOPs执行检查
- **S5-问题整改追踪与复查专员**: 整改闭环管理

##### 4.6 供应组 (L系列) - 新增2个

详细规格参见 [new-agents-recommendations-v2.0.md](../reports/new-agents-recommendations-v2.0.md) L系列章节

- **L4-食品安全溯源与合规管理专家**: 食品安全追溯
- **L5-物流配送优化与路径规划专家**: 配送路线优化

##### 4.7 行政组 (R系列) - 新增7个

详细规格参见 [new-agents-recommendations-v2.0.md](../reports/new-agents-recommendations-v2.0.md) R系列章节

- **R10-飞书审批流自动化专家**
- **R11-飞书日历与会议管理助手**
- **R12-飞书OKR目标管理助手**
- **R13-飞书员工培训与学习平台管理助手**
- **R14-飞书企业邮箱管理助手**
- **R15-飞书应用集成与开放平台专家**
- **R16-飞书数据报表与BI看板生成助手**

**验收标准**:
- ✅ 52个新智能体文件创建完成
- ✅ 所有文件符合命名规范 `[系列][序号]-名称.md`
- ✅ YAML frontmatter配置完整(name, description, tools, color, capabilities)
- ✅ 每个智能体包含完整的角色定位、核心能力、工作流程说明

#### 阶段5: 清理与优化 (1小时)

**目标**: 删除重复文件,优化目录结构

**清理任务**:

1. **删除重复文件**:
   - 检查是否存在 `经营分析专家.md` 和 `P1-经营分析专家.md` 等重复
   - 删除所有未重命名的旧版本文件

2. **优化目录结构**:
   ```
   .claude/agents/
   ├── system/              → System系列 (Sys1-Sys14)
   ├── 情报组/              → E系列 (E1-E8)
   ├── 行政组/              → R系列 (R1-R23)
   ├── 战略组/              → G系列 (G1-G6)  [重命名from策划组]
   ├── 创意组/              → V系列 (V1-V14) [重命名from运营组]
   ├── 筹建组/              → C系列 (C1-C5)
   ├── 督导组/              → S系列 (S1-S5)
   ├── 供应组/              → L系列 (L1-L5)
   └── 中台组/              → M系列 (M1-M10) [新建]
   ```

3. **生成智能体索引**:
   - 创建 `.claude/agents/AGENTS_INDEX.md` 智能体总览文档
   - 按组别列出所有110个智能体及其核心能力

**验收标准**:
- ✅ 无重复文件
- ✅ 目录结构清晰规范
- ✅ 智能体索引文档完整

#### 阶段6: 验证与上线 (2小时)

**目标**: 全面验证重构成果,确保系统可用

**验证任务**:

1. **命名规范验证**:
   ```bash
   # 检查所有文件是否符合命名规范
   find .claude/agents -name "*.md" | grep -v -E "^[A-Z]+[0-9]+-.*\.md$|^Sys[0-9]+-.*\.md$"
   ```
   预期结果: 无不符合规范的文件

2. **文件完整性验证**:
   - 验证110个智能体文件全部存在
   - 验证每个文件的YAML frontmatter格式正确

3. **功能验证**:
   - 随机抽取10个智能体,测试其工具调用是否正常
   - 验证MCP工具集成(Lark, Chrome, COS, Chart Generator)是否可用

4. **文档验证**:
   - 验证智能体索引文档准确性
   - 验证各组别README是否同步更新

5. **Git提交与合并**:
   ```bash
   git add .claude/agents/
   git commit -m "feat: 完成智能体系统v2.0重构 - 110个标准化智能体"
   git push origin feature/agents-restructuring-v2
   # 创建Pull Request并合并到main分支
   ```

**验收标准**:
- ✅ 命名规范100%符合
- ✅ 110个智能体文件完整
- ✅ 抽样功能测试通过
- ✅ 文档同步更新
- ✅ 代码成功合并到主分支

---

## 5. 详细执行计划

### 5.1 阶段1执行脚本

```bash
#!/bin/bash
# agents-restructuring-phase1-backup.sh
# 阶段1: 备份与准备

echo "=== ZTL智能体系统重构 - 阶段1: 备份与准备 ==="

# 1. 创建备份目录
BACKUP_DIR="agents-backup-$(date +%Y%m%d-%H%M%S)"
mkdir -p "$BACKUP_DIR"

# 2. 备份agents目录
cp -r .claude/agents/* "$BACKUP_DIR/"
echo "✅ 已备份到: $BACKUP_DIR"

# 3. 生成当前智能体清单
find .claude/agents -name "*.md" > "$BACKUP_DIR/current-agents-inventory.txt"
echo "✅ 已生成智能体清单: $BACKUP_DIR/current-agents-inventory.txt"

# 4. 创建Git分支
git checkout -b feature/agents-restructuring-v2
echo "✅ 已创建Git分支: feature/agents-restructuring-v2"

echo "=== 阶段1完成 ==="
```

### 5.2 阶段2执行脚本

```bash
#!/bin/bash
# agents-restructuring-phase2-system-rename.sh
# 阶段2: System系列重命名

echo "=== ZTL智能体系统重构 - 阶段2: System系列重命名 ==="

cd .claude/agents/system

# System系列重命名映射
declare -A RENAME_MAP=(
    ["Agent-Creator.md"]="Sys1-智能体创建工程师.md"
    ["Api-Creator.md"]="Sys2-API创建工程师.md"
    ["Context-Manager.md"]="Sys3-上下文管理器.md"
    ["Doc-Manager.md"]="Sys4-文档管理器.md"
    ["Fastmcp-Developer.md"]="Sys5-FastMCP开发工程师.md"
    ["Hooks-Creator.md"]="Sys6-Hooks创建工程师.md"
    ["Learning-Engineer.md"]="Sys7-学习工程师.md"
    ["OAI-Agent-SDK-Developer.md"]="Sys8-OpenAI智能体SDK开发师.md"
    ["Output-Style-Designer.md"]="Sys9-输出样式设计师.md"
    ["Python-Developer.md"]="Sys10-Python开发工程师.md"
    ["Slash-Command-Creator.md"]="Sys11-斜杠命令创建工程师.md"
    ["Skills-Creator.md"]="Sys12-技能创建工程师.md"
    ["Statusline-Setup.md"]="Sys13-状态栏配置工程师.md"
    ["Test-Engineer.md"]="Sys14-测试工程师.md"
)

# 执行重命名
for old_name in "${!RENAME_MAP[@]}"; do
    new_name="${RENAME_MAP[$old_name]}"
    if [ -f "$old_name" ]; then
        mv "$old_name" "$new_name"
        echo "✅ 重命名: $old_name → $new_name"
    else
        echo "⚠️  文件不存在: $old_name"
    fi
done

cd -
echo "=== 阶段2完成 ==="
```

### 5.3 阶段3执行脚本 (示例 - 情报组)

```bash
#!/bin/bash
# agents-restructuring-phase3-existing-groups.sh
# 阶段3: 现有组别重命名 - 情报组示例

echo "=== 阶段3: 情报组 (E系列) 重命名 ==="

cd .claude/agents/情报组

# 情报组重命名映射
declare -A E_RENAME_MAP=(
    ["需求分析员.md"]="E1-需求分析与任务拆解员.md"
    ["Deep Research公开资料调研员.md"]="E2-Deep Research公开资料调研员.md"
    ["Chrome MCP网站情报采集员.md"]="E3-Chrome MCP网站情报采集员.md"
    ["Playwright MCP深度爬虫员.md"]="E4-Playwright MCP深度爬虫员.md"
    ["深度情报分析员.md"]="E5-深度情报分析员.md"
    ["Supabase云数据库双向处理专员.md"]="E6-Supabase云数据库双向处理专员.md"
    ["COS云存储双向处理专员.md"]="E7-COS云存储双向处理专员.md"
    ["E系列情报系统总指挥官.md"]="E8-E系列情报系统总指挥官.md"
)

for old_name in "${!E_RENAME_MAP[@]}"; do
    new_name="${E_RENAME_MAP[$old_name]}"
    if [ -f "$old_name" ]; then
        mv "$old_name" "$new_name"
        echo "✅ 重命名: $old_name → $new_name"
    fi
done

cd -
echo "=== 情报组重命名完成 ==="
```

**注意**: 需要为行政组、战略组、创意组、筹建组、督导组、供应组分别创建类似脚本

### 5.4 阶段4智能体创建模板

**模板文件**: `.claude/agents/templates/agent-template-v2.md`

```yaml
---
name: [系列编号]-[中文名称]
description: |
  [简短的角色定位描述,2-3句话]
  [核心职责概述]
tools:
  - Read
  - Write
  - Edit
  # 根据需要添加MCP工具
  # - mcp__lark-mcp__xxx
  # - mcp__chart-generator__xxx
color: [根据组别选择颜色]
version: 2.0.0
capabilities:
  - [核心能力1]
  - [核心能力2]
  - [核心能力3]
  - [核心能力4]
dependencies:
  - [依赖的其他智能体或系统]
---

# [系列编号]-[中文名称]

## 🎯 角色定位

[详细的角色定位说明,包括:]
- 业务场景
- 核心价值
- 服务对象

## 🛠️ 核心能力

### 1. [能力名称1]

[详细说明该能力的:]
- 应用场景
- 实现方式
- 输出成果

### 2. [能力名称2]

...

## 📋 工作流程

```mermaid
graph LR
    A[输入] --> B[处理]
    B --> C[输出]
```

## 🔧 工具使用

| 工具 | 用途 | 使用场景 |
|------|------|---------|
| [工具名] | [用途] | [场景] |

## 📊 输出成果

- [成果1]: [说明]
- [成果2]: [说明]

## 🔗 协作关系

- **上游智能体**: [依赖的智能体]
- **下游智能体**: [服务的智能体]
- **协同智能体**: [协作的智能体]

## 📝 使用示例

### 示例1: [场景名称]

**输入**:
```
[示例输入]
```

**处理过程**:
1. [步骤1]
2. [步骤2]

**输出**:
```
[示例输出]
```

## ⚠️ 注意事项

- [注意事项1]
- [注意事项2]

## 📚 参考资料

- [相关文档链接]
- [最佳实践指南]
```

---

## 6. 验证门控

### 6.1 阶段门控机制

每个阶段完成后需通过以下验证才能进入下一阶段:

| 阶段 | 验证项 | 验证方法 | 通过标准 |
|------|--------|---------|---------|
| 阶段1 | 备份完整性 | 文件对比 | 备份文件数=原始文件数 |
| 阶段2 | System重命名 | 命名规范检查 | 14个文件全部符合Sys[N]-格式 |
| 阶段3 | 现有组重命名 | 系列编号检查 | 44个文件全部符合[系列][N]-格式 |
| 阶段4 | 新智能体创建 | 文件存在性检查 | 52个新文件全部创建 |
| 阶段5 | 清理与优化 | 重复文件检查 | 无重复文件 |
| 阶段6 | 功能验证 | 抽样测试 | 10/10抽样测试通过 |

### 6.2 自动化验证脚本

```bash
#!/bin/bash
# agents-validation.sh
# 智能体系统验证脚本

echo "=== ZTL智能体系统验证 ==="

# 1. 验证命名规范
echo "验证1: 命名规范检查..."
INVALID_NAMES=$(find .claude/agents -name "*.md" -not -path "*/README.md" | \
    grep -v -E "(^.*/Sys[0-9]+-.*\.md$|^.*/[A-Z][0-9]+-.*\.md$)")

if [ -z "$INVALID_NAMES" ]; then
    echo "✅ 命名规范检查通过"
else
    echo "❌ 发现不符合规范的文件:"
    echo "$INVALID_NAMES"
    exit 1
fi

# 2. 验证智能体总数
echo "验证2: 智能体数量检查..."
TOTAL_COUNT=$(find .claude/agents -name "*.md" -not -path "*/README.md" | wc -l)
if [ "$TOTAL_COUNT" -eq 110 ]; then
    echo "✅ 智能体数量正确: 110个"
else
    echo "❌ 智能体数量不正确: 期望110个,实际${TOTAL_COUNT}个"
    exit 1
fi

# 3. 验证系列编号连续性
echo "验证3: 系列编号连续性检查..."
for series in Sys E R G V C S L M; do
    echo "  检查 ${series} 系列..."
    # 这里可以添加更详细的连续性检查逻辑
done
echo "✅ 系列编号检查通过"

# 4. 验证YAML frontmatter
echo "验证4: YAML frontmatter格式检查..."
for file in $(find .claude/agents -name "*.md" -not -path "*/README.md"); do
    if ! grep -q "^---$" "$file"; then
        echo "❌ 文件缺少YAML frontmatter: $file"
        exit 1
    fi
done
echo "✅ YAML格式检查通过"

echo "=== 全部验证通过 ✅ ==="
```

### 6.3 质量门控标准

| 质量维度 | 指标 | 目标值 | 测量方法 |
|---------|------|--------|---------|
| **命名规范符合率** | 符合标准的文件数/总文件数 | 100% | 正则表达式匹配 |
| **文件完整性** | 存在的文件数/应有文件数 | 100% | 文件清单对比 |
| **YAML格式正确率** | 格式正确的文件数/总文件数 | 100% | YAML解析器验证 |
| **工具配置有效性** | 工具调用成功次数/测试次数 | ≥90% | 抽样功能测试 |
| **文档完整性** | 必需章节完整的文件数/总文件数 | 100% | 章节存在性检查 |

---

## 7. 风险与回滚

### 7.1 风险识别

| 风险类型 | 风险描述 | 影响程度 | 概率 | 应对策略 |
|---------|---------|---------|------|---------|
| **数据丢失** | 重命名过程中文件丢失 | 高 | 低 | 完整备份+Git版本控制 |
| **命名冲突** | 新旧文件命名冲突 | 中 | 中 | 先删除旧文件再创建新文件 |
| **工具失效** | MCP工具配置失效 | 中 | 低 | 保留旧版本配置备份 |
| **协作中断** | 重构期间影响团队协作 | 中 | 高 | 分支开发+充分测试后合并 |
| **文档不一致** | 智能体与文档说明不匹配 | 低 | 中 | 强制文档同步更新 |

### 7.2 回滚方案

#### 方案1: Git回滚 (推荐)

**适用场景**: 发现重大问题,需要完全回退

**步骤**:
```bash
# 1. 查看提交历史
git log --oneline

# 2. 回退到重构前的提交
git reset --hard [重构前的commit-hash]

# 3. 强制推送(如果已推送到远程)
git push origin main --force

# 4. 删除重构分支
git branch -D feature/agents-restructuring-v2
```

#### 方案2: 备份恢复

**适用场景**: Git回滚不可行,使用备份恢复

**步骤**:
```bash
# 1. 删除当前agents目录
rm -rf .claude/agents

# 2. 从备份恢复
cp -r agents-backup-[timestamp]/* .claude/agents/

# 3. 验证恢复结果
find .claude/agents -name "*.md" | wc -l  # 应为58
```

#### 方案3: 部分回滚

**适用场景**: 仅某个阶段出现问题

**步骤**:
```bash
# 1. 回退到上一个阶段的提交
git log --oneline --grep="阶段[N]完成"
git reset --hard [阶段N的commit-hash]

# 2. 修复问题后重新执行
# 重新执行阶段N+1的脚本
```

### 7.3 应急预案

**场景1: 关键智能体失效**

1. 立即回滚到备份版本
2. 分析失效原因(工具配置/权限/依赖)
3. 修复后重新部署单个智能体
4. 验证修复效果

**场景2: 大规模命名错误**

1. 暂停重构流程
2. 使用自动化脚本批量修复命名
3. 重新运行验证脚本
4. 通过验证后继续流程

**场景3: 团队协作冲突**

1. 冻结agents目录修改
2. 通知团队成员同步最新代码
3. 解决冲突后统一提交
4. 恢复正常开发流程

---

## 8. 任务清单

### 8.1 阶段1任务 (1小时)

- [ ] 创建备份目录 `agents-backup-[timestamp]/`
- [ ] 完整备份 `.claude/agents/` 目录
- [ ] 生成智能体清单 `current-agents-inventory.txt`
- [ ] 创建Git分支 `feature/agents-restructuring-v2`
- [ ] 验证备份完整性(58个文件)

### 8.2 阶段2任务 (2小时)

- [ ] 重命名System/Agent-Creator.md → Sys1-智能体创建工程师.md
- [ ] 重命名System/Api-Creator.md → Sys2-API创建工程师.md
- [ ] 重命名System/Context-Manager.md → Sys3-上下文管理器.md
- [ ] 重命名System/Doc-Manager.md → Sys4-文档管理器.md
- [ ] 重命名System/Fastmcp-Developer.md → Sys5-FastMCP开发工程师.md
- [ ] 重命名System/Hooks-Creator.md → Sys6-Hooks创建工程师.md
- [ ] 重命名System/Learning-Engineer.md → Sys7-学习工程师.md
- [ ] 重命名System/OAI-Agent-SDK-Developer.md → Sys8-OpenAI智能体SDK开发师.md
- [ ] 重命名System/Output-Style-Designer.md → Sys9-输出样式设计师.md
- [ ] 重命名System/Python-Developer.md → Sys10-Python开发工程师.md
- [ ] 重命名System/Slash-Command-Creator.md → Sys11-斜杠命令创建工程师.md
- [ ] 重命名System/Skills-Creator.md → Sys12-技能创建工程师.md
- [ ] 重命名System/Statusline-Setup.md → Sys13-状态栏配置工程师.md
- [ ] 重命名System/Test-Engineer.md → Sys14-测试工程师.md
- [ ] 验证14个System智能体命名规范

### 8.3 阶段3任务 (3小时)

#### 情报组 (E系列)
- [ ] 重命名8个情报组智能体为E1-E8格式
- [ ] 验证E系列命名规范

#### 行政组 (R系列)
- [ ] 重命名16个行政组智能体为R1-R16格式
- [ ] 删除重复文件
- [ ] 验证R系列命名规范

#### 策划组 → 战略组 (G系列)
- [ ] 重命名文件夹: 策划组/ → 战略组/
- [ ] 重命名5个智能体为G系列格式
- [ ] 删除或转移非战略层智能体
- [ ] 验证G系列命名规范

#### 运营组 → 创意组 (V系列)
- [ ] 重命名文件夹: 运营组/ → 创意组/
- [ ] 重命名7个智能体为V系列格式
- [ ] 验证V系列命名规范

#### 筹建组 (C系列)
- [ ] 重命名5个智能体为C1-C5格式
- [ ] 验证C系列命名规范

#### 督导组 (S系列)
- [ ] 重命名2个智能体为S1-S2格式
- [ ] 验证S系列命名规范

#### 供应组 (L系列)
- [ ] 重命名3个智能体为L1-L3格式
- [ ] 验证L系列命名规范

### 8.4 阶段4任务 (8小时)

#### 战略组新增 (2个)
- [ ] 创建G5-战略投资与并购分析师.md
- [ ] 创建G6-集团年度经营计划编制专家.md

#### 创意组新增 (7个)
- [ ] 创建V5-品牌VI视觉设计师.md
- [ ] 创建V8-图生视频AIGC专家.md
- [ ] 创建V9-AI绘画提示词工程师.md
- [ ] 创建V10-3D菜品建模与渲染师.md
- [ ] 创建V11-动态海报与GIF制作师.md
- [ ] 创建V12-餐饮宣传片导演.md
- [ ] 创建V13-直播脚本与场控策划师.md

#### 中台组新增 (10个)
- [ ] 创建文件夹: 中台组/
- [ ] 创建M1-美团管家数据导入导出自动化专家.md
- [ ] 创建M2-供应链管理系统集成专家.md
- [ ] 创建M3-会员与营销中台运营专家.md
- [ ] 创建M4-小程序运营与功能配置专家.md
- [ ] 创建M5-外卖平台运营优化专家.md
- [ ] 创建M6-数据中台报表生成与分析师.md
- [ ] 创建M7-POS系统对接与账务核对专家.md
- [ ] 创建M8-多门店数据同步与一致性管理专家.md
- [ ] 创建M9-美团管家API开发与集成工程师.md
- [ ] 创建M10-中台系统监控与故障诊断专家.md

#### 督导组新增 (3个)
- [ ] 创建S3-神秘顾客调查分析师.md
- [ ] 创建S4-门店标准化运营检查专家.md
- [ ] 创建S5-问题整改追踪与复查专员.md

#### 供应组新增 (2个)
- [ ] 创建L4-食品安全溯源与合规管理专家.md
- [ ] 创建L5-物流配送优化与路径规划专家.md

#### 行政组新增 (7个)
- [ ] 创建R10-飞书审批流自动化专家.md
- [ ] 创建R11-飞书日历与会议管理助手.md
- [ ] 创建R12-飞书OKR目标管理助手.md
- [ ] 创建R13-飞书员工培训与学习平台管理助手.md
- [ ] 创建R14-飞书企业邮箱管理助手.md
- [ ] 创建R15-飞书应用集成与开放平台专家.md
- [ ] 创建R16-飞书数据报表与BI看板生成助手.md

### 8.5 阶段5任务 (1小时)

- [ ] 检查并删除所有重复文件
- [ ] 验证目录结构规范性
- [ ] 创建 `.claude/agents/AGENTS_INDEX.md` 智能体总览
- [ ] 更新各组别README.md
- [ ] 验证无重复文件残留

### 8.6 阶段6任务 (2小时)

- [ ] 运行命名规范验证脚本
- [ ] 验证智能体总数=110个
- [ ] 抽样测试10个智能体功能
- [ ] 验证MCP工具集成可用性
- [ ] 验证文档同步更新
- [ ] Git提交所有变更
- [ ] 创建Pull Request
- [ ] 代码审查通过后合并到main分支
- [ ] 标记版本tag: v2.0.0

---

## 附录

### 附录A: 快速参考 - 系列编号对照表

| 系列代码 | 组别名称 | 智能体数量 | 编号范围 | 核心职责 |
|---------|---------|-----------|---------|---------|
| **Sys** | System系列 | 14 | Sys1-Sys14 | 框架级智能体(创建/配置/管理) |
| **E** | 情报组 | 8 | E1-E8 | 情报采集、分析、数据处理 |
| **R** | 行政组 | 23 | R1-R23 | 飞书生态系统管理 |
| **G** | 战略组 | 6 | G1-G6 | 集团战略、投资、经营计划 |
| **V** | 创意组 | 14 | V1-V14 | AIGC内容生产(图像/视频/设计) |
| **C** | 筹建组 | 5 | C1-C5 | 新店筹建、工程管理 |
| **S** | 督导组 | 5 | S1-S5 | 连锁门店执行监督 |
| **L** | 供应组 | 5 | L1-L5 | 供应链管理、物流优化 |
| **M** | 中台组 | 10 | M1-M10 | 美团管家SaaS系统管理 |

**总计**: 110个智能体

### 附录B: 颜色编码规范

| 组别 | 颜色代码 | 色系 | 视觉含义 |
|------|---------|------|---------|
| System系列 | `blue` | 蓝色系 | 基础/框架/稳定 |
| 情报组 | `green` | 绿色系 | 数据/分析/洞察 |
| 行政组 | `orange` | 橙色系 | 管理/协作/支持 |
| 战略组 | `purple` | 紫色系 | 战略/高层/决策 |
| 创意组 | `pink` | 粉色系 | 创意/设计/艺术 |
| 筹建组 | `brown` | 棕色系 | 建设/工程/实施 |
| 督导组 | `red` | 红色系 | 监督/质量/合规 |
| 供应组 | `yellow` | 黄色系 | 供应/物流/流转 |
| 中台组 | `cyan` | 青色系 | 数据/系统/集成 |

### 附录C: 关键文档路径

| 文档类型 | 路径 | 说明 |
|---------|------|------|
| v2.0建议书 | `reports/new-agents-recommendations-v2.0.md` | 52个新智能体详细规格 |
| 智能体索引 | `.claude/agents/AGENTS_INDEX.md` | 110个智能体总览 |
| 系统文档 | `.claude/agents/README.md` | 智能体系统使用指南 |
| 备份目录 | `agents-backup-[timestamp]/` | 重构前完整备份 |
| 验证脚本 | `scripts/agents-validation.sh` | 自动化验证脚本 |

### 附录D: 联系方式与支持

| 角色 | 职责 | 联系方式 |
|------|------|---------|
| 项目负责人 | 整体规划与决策 | - |
| 技术执行人 | 脚本开发与执行 | - |
| 质量审核人 | 验证与质量控制 | - |
| 文档维护人 | 文档同步与更新 | - |

---

**文档版本**: v2.0
**最后更新**: 2025-10-20
**下次审查**: 重构完成后
**变更记录**:
- 2025-10-20: 创建v2.0重构计划文档

---

**声明**: 本文档为ZTL数智化作战中心智能体系统重构的官方指导文档,所有执行必须严格遵循本文档规范。重构过程中如遇到未预见的情况,应及时更新本文档并通知所有相关方。
